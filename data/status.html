<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="WCTSensors">
        <title>Domochip WirelessCTSensors</title>
        
        <link rel="stylesheet" href="pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous">
        <link rel="stylesheet" href="side-menu.css">
    </head>
    <body>

        <div id="layout">
            <!-- Menu toggle -->
            <a href="#menu" id="menuLink" class="menu-link">
                <!-- Hamburger icon -->
                <span></span>
            </a>

            <div id="menu">
                <div class="pure-menu">
                    <div class="pure-menu-heading">Domochip</div>
                    <div class="pure-menu-heading">WCTSensors</div>

                    <ul class="pure-menu-list">
                        <li class="pure-menu-item pure-menu-selected"><a href="./" class="pure-menu-link">Status</a></li>
                        <li class="pure-menu-item"><a href="config" class="pure-menu-link">Config</a></li>
                        <li class="pure-menu-item"><a href="fw" class="pure-menu-link">Firmware</a></li>
                    </ul>
                </div>
            </div>

            <div id="main">
                <div class="header">
                    <h1>Status <span id="l"><h6 style="display:inline"><b> Loading...</b></h6></span></h1>
                    <span id='i'></span><br>
                </div>

                <div class="content">
                    <h2 class="content-subhead">System<span id="l1"><h6 style="display:inline"><b> Loading...</b></h6></span></h2>

                    SN : <span id="sn"></span><br>
                    Build version : <span id="b"></span><br>
                    UpTime : <span id="u"></span><br>
                    FreeHeap : <span id="f"></span><br>

                    <h2 class="content-subhead">WiFi<span id="l2"><h6 style="display:inline"><b> Loading...</b></h6></span></h2>
                    AP : <span id="ap"></span> (<span id="ai"></span>)<br>
                    Station : <span id="sta"></span> (<span id="stai"></span>)<br>

                            <h2 class="content-subhead">CTSensors <span id="l3"><h6 style="display:inline"><b> Loading...</b></h6></span></h2>
        Current I 1 : <span id="ci1"></span> (average : <span id="cai1"></span>)<br>
        Current I 2 : <span id="ci2"></span> (average : <span id="cai2"></span>)<br>
        Current I 3 : <span id="ci3"></span> (average : <span id="cai3"></span>)<br>
        <br>
        Counter 1 : <span id="c1"></span><br>
        Counter 2 : <span id="c2"></span><br>
        Counter 2 : <span id="c3"></span><br>
        <dl>
            <dt>Jeedom Upload</dt>
            <dd>Last Request Clamp 1 : <span id="lr1"></span></dd>
            <dd>Last Request Result Clamp 1 : <span id="lrr1"></span></dd>
            <dd>Last Request Clamp 2 : <span id="lr2"></span></dd>
            <dd>Last Request Result Clamp 2 : <span id="lrr2"></span></dd>
            <dd>Last Request Clamp 3 : <span id="lr3"></span></dd>
            <dd>Last Request Result Clamp 3 : <span id="lrr3"></span></dd>
        </dl>
                    
                </div>
            </div>
        </div>

    
        <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
        <script>
            if (!window.jQuery){
                document.write('<script type="text/javascript" src="/jquery-3.2.1.min.js"><\/script>');
                document.getElementById('l').innerHTML='<h4 style="display:inline"> (JQuery loaded locally)</h4>';
            }
            else $("#l").fadeOut();
        </script>
        <script>
            if (!window.jQuery) {
                document.getElementById('l').innerHTML='';
                document.getElementById('l1').innerHTML='<h4 style="display:inline;color:red;"><b> Failed</b></h4>';
                document.getElementById('l2').innerHTML='<h4 style="display:inline;color:red;"><b> Failed</b></h4>';
                document.getElementById('i').innerHTML='<h3 style="color:red"> JQuery is required. We were not able to load it :-(</h3>';
            }
        </script>
        <script>
            $(document).ready(function(){
                $.getJSON("/gs0", function(GS0){

                    $.each(GS0,function(k,v){
                        $('#'+k).html(v);
                    })
                    $("#l1").fadeOut();
                })
                .fail(function(){
                    $("#l1").html('<h4 style="display:inline;color:red;"><b> Failed</b></h4>');
                });

                $.getJSON("/gsw", function(GSW){

                    $.each(GSW,function(k,v){
                        $('#'+k).html(v);
                    })
                    $("#l2").fadeOut();
                })
                .fail(function(){
                    $("#l2").html('<h4 style="display:inline;color:red;"><b> Failed</b></h4>');
                });

                        $.getJSON("/gs1", function(GS1){

            $.each(GS1,function(k,v){
                $('#'+k).html(v);
            })
            $("#l3").fadeOut();
        })
        .fail(function(){
            $("#l3").html('<h4 style="display:inline;color:red;"><b> Failed</b></h4>');
        });
            });
        </script>
        <script src="side-menu.js"></script>
    </body>
</html>
